package templates

import (
	"github.com/knackwurstking/pg-press/internal/components"
	"github.com/knackwurstking/pg-press/internal/shared"
	"github.com/knackwurstking/pg-press/internal/urlb"
)

type RegenerationsProps struct {
	PressRegenerations []*shared.PressRegeneration
	User               *shared.User
}

templ Regenerations(p RegenerationsProps) {
	if len(p.PressRegenerations) == 0 {
		@components.NotFoundText("Es sind keine Regenerationen f√ºr diese Presse vorhanden.")
		{{ return }}
	}
	<figure>
		<table>
			<tr>
				<th>Von</th>
				<th>Bis</th>
				<th></th>
			</tr>
			for _, r := range p.PressRegenerations {
				<tr>
					<td>{ r.Start.FormatDate() }</td>
					<td>{ r.Stop.FormatDate() }</td>
					<td>
						@components.TableActions(components.TableActionsOptions{
							EditHref:        urlb.UrlDialogs().EditPressRegeneration(r.ID),
							EditAdminOnly:   false,
							DeleteHref:      urlb.UrlPressRegeneration(r.PressNumber, r.ID).Delete,
							DeleteAdminOnly: true,
							User:            p.User,
						})
					</td>
				</tr>
			}
		</table>
	</figure>
}
