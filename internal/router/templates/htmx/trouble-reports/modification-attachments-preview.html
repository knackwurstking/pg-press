{{$pageData := .}}
{{$troubleReport := $pageData.TroubleReport}}
{{$modification := $pageData.Modification}}
{{$attachments := $pageData.Attachments}}

<div class="attachments-preview-container">
    <div class="attachments-preview-label">
        <i class="bi bi-paperclip"></i>
        Bilder ({{len $attachments}})
    </div>
    <div class="attachments-preview-scroll">
        {{range $attachments}}
        <div class="attachment-preview-item"
             data-report-id="{{$troubleReport.ID}}"
             data-attachment-id="{{.GetID}}"
             data-is-image="{{.IsImage}}"
             onclick="viewAttachmentFromData(this.dataset.reportId, this.dataset.attachmentId, this.dataset.isImage)">
            <div class="attachment-preview-image">
                <img
                    loading="lazy"
                    src="./trouble-reports/attachments?id={{$troubleReport.ID}}&attachment_id={{.GetID}}"
                    alt="Bild {{.ID}}"
                    class="preview-thumbnail"
                />
            </div>
        </div>
        {{end}}
    </div>
</div>
