{{$pageData := .}}
{{$troubleReport := $pageData.TroubleReport}}

{{if and $troubleReport.LoadedAttachments (gt (len $troubleReport.LoadedAttachments) 0)}}
<div class="attachments-preview-container ">
    <div class="attachments-preview-label">
        <i class="bi bi-paperclip"></i>
        Bilder ({{len $troubleReport.LoadedAttachments}})
    </div>
    <div class="attachments-preview-scroll">
        {{range $troubleReport.LoadedAttachments}}
        <div class="attachment-preview-item"
             data-report-id="{{$troubleReport.ID}}"
             data-attachment-id="{{.GetID}}"
             data-is-image="{{.IsImage}}"
             onclick="viewAttachmentFromData(this.dataset.reportId, this.dataset.attachmentId, this.dataset.isImage)">
            <div class="attachment-preview-image">
                <img
                    src="./trouble-reports/attachments?id={{$troubleReport.ID}}&attachment_id={{.GetID}}"
                    alt="Bild {{.ID}}"
                    class="preview-thumbnail"
                />
            </div>
        </div>
        {{end}}
    </div>
</div>
{{end}}
