<!-- Title -->

{{define "title"}}PG: Presse | Profil{{end}}

<!-- App Bar Title -->

{{define "app-bar-title"}}Profil{{end}}

<!-- Nav -->

{{define "nav"}}
<div class="flex row gap justify-end align-center">
    {{template "nav-feed"}}

    <a role="button" class="ghost contrast icon" href="./profile" disabled>
        <i class="bi bi-person-circle"></i>
    </a>

    <a role="button" class="ghost contrast icon" href="./">
        <i class="bi bi-house"></i>
    </a>
</div>
{{end}}

<!-- Content -->

{{define "content"}}
<style>
    .profile-container {
        max-width: 42rem;
        margin: 0 auto;
    }

    .profile-header {
        background: var(--ui-color-100);
        padding: calc(var(--ui-spacing) * 2);
        margin-bottom: calc(var(--ui-spacing) * 2);
    }

    .user-name-section {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--ui-spacing);
    }

    .user-name-section h1 {
        margin: 0;
        color: var(--ui-text);
        font-size: 2.25rem;
    }

    .user-info {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: var(--ui-spacing);
    }

    .telegram-id {
        color: var(--ui-color-600);
        font-size: 0.95rem;
        background: var(--ui-color-200);
        padding: calc(var(--ui-spacing) / 2) var(--ui-spacing);
        border-radius: var(--ui-radius);
        border: var(--ui-border-width) var(--ui-border-style)
            var(--ui-color-300);
    }

    .profile-dialog {
        background: var(--ui-bg);
        border-radius: calc(var(--ui-radius) * 2);
        padding: calc(var(--ui-spacing) * 2);
        box-shadow: 0 10px 25px var(--ui-backdrop-color);
    }

    .profile-dialog label {
        margin-bottom: var(--ui-spacing);
    }

    .profile-dialog input {
        margin-top: calc(var(--ui-spacing) / 2);
        font-size: 1rem;
    }
</style>

<main class="container fluid">
    <div class="profile-container">
        <div class="profile-header border">
            <div class="user-name-section">
                <h1>{{.User.UserName}}</h1>
                <button
                    class="secondary icon"
                    onclick='document.querySelector("#dialogEditUserName").showModal();'
                    title="Benutzername bearbeiten"
                >
                    <i class="bi bi-pen"></i>
                </button>
            </div>

            <div class="user-info">
                <div class="telegram-id">
                    <i class="bi bi-telegram"></i>
                    Telegram ID: {{.User.TelegramID}}
                </div>
                <a role="button" href="./logout" class="ghost destructive flex row gap">
                    <i class="bi bi-box-arrow-right"></i>
                    Abmelden
                </a>
            </div>
        </div>

        <div style="overflow: hidden; background: var(--ui-color-50);" class="border">
            <span
                id="cookies"
                hx-get="./profile/cookies"
                hx-trigger="load"
                hx-swap="outerHTML"
            ></span>
        </div>
    </div>

    <dialog
        id="dialogEditUserName"
        class="profile-dialog border clean"
        oncancel="event.preventDefault()"
    >
        <form action="./profile">
            <label class="flex column">
                <strong>Benutzername ändern</strong>
                <input
                    name="user-name"
                    type="text"
                    value="{{.User.UserName}}"
                    placeholder="Neuer Benutzername"
                    required
                />
            </label>

            <footer style="margin-top: calc(var(--ui-spacing) * 2);" class="flex row gap justify-end">
                <a role="button" href="./profile" class="secondary flex row gap">
                    <i class="bi bi-x-circle"></i>
                    Schließen
                </a>

                <button type="submit" class="primary flex row gap">
                    <i class="bi bi-check-circle"></i>
                    Ändern
                </button>
            </footer>
        </form>
    </dialog>
</main>
{{end}}
