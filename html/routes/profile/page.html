<!-- Title -->

{{define "title"}}PG: Presse | Profil{{end}}

<!-- Additional Scripts -->

{{define "additional-scripts"}}
<link rel="stylesheet" href="./css/page/profile.css" />
<script src="./js/page/profile.js" defer></script>
{{end}}

<!-- Content -->

{{define "content"}}
<header class="container-fluid">
    <hgroup>
        <span class="user-name">
            <h1>{{.User.UserName}}</h1>

            <button
                class="contrast outline icon"
                onclick='
                    document.querySelector("#dialogEditUserName").showModal();
                '
            >
                {{template "svg-pencil"}}
            </button>
        </span>

        <p>Telegram ID: {{.User.TelegramID}}</p>
    </hgroup>
</header>

<main class="container-fluid">
    {{if ne .ErrorMessages nil}}
    <dialog id="dialogErrorMessages" open>
        <form method="dialog">
            <header>
                <h2>{{template "svg-triangle-alert"}}</h2>
            </header>

            <span class="messages">
                {{range $message := .ErrorMessages}}
                    <p>{{$message}}</p>
                {{end}}
            </span>

            <footer>
                <button>Schlie√üen</button>
            </footer>
        </form>
    </dialog>
    {{end}}

    <dialog 
        id="dialogEditUserName" 
        onsubmit='
            const value = this.querySelector(`input[name="user-name"]`).value;
        '
    >
        <form action="./profile">
            <label>
                User Name
                <input
                    name="user-name"
                    type="text"
                    value="{{.User.UserName}}"
                    placeholder="User Name"
                    aria-invalid="{{if eq .User.UserName ""}}{{end}}"
                />
            </label>

            <button type="submit">Submit</button>
        </form>
    </dialog>
</main>
{{end}}
