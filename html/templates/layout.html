<!doctype html>
<html lang="de">

<head>
    <meta charset="utf-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

    <link rel="icon" href="./favicon.ico" sizes="any" />
    <link rel="apple-touch-icon" href="./apple-touch-icon-180x180.png" />

    <link rel="manifest" href="./manifest.json" />

    <link rel="stylesheet" href="./css/bootstrap-icons.min.css" />
    <link rel="stylesheet" href="./ui-dev.min.css" />

    <title>{{block "title" .}}{{end}}</title>

    <script src="./htmx.min.js"></script>

    <script>
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker
                    .register("./service-worker.js")
                    .then((registration) => {
                        console.info(
                            "Service Worker registered with scope:",
                            registration.scope,
                        );
                    })
                    .catch((err) => {
                        console.error(
                            "Service Worker registration failed:",
                            err,
                        );
                    });
            });
        }
    </script>
</head>

<body>
    <header class="container fluid">
        <nav class="flex row justify-between">
            <ul class="flex-item">
                <li>
                    <strong>{{block "app-bar-title" .}}{{end}}</strong>
                </li>
            </ul>

            {{block "nav" .}}{{end}}
        </nav>
    </header>

    {{block "content" .}}{{end}}

    {{if ne (len .ErrorMessages) 0}}
    <dialog id="dialogErrorMessages" class="clean">
        <form method="dialog">
            <i style="font-size: 2.5rem" class="bi bi-exclamation-triangle"></i>

            <span class="messages flex column gap">
                {{range $message := .ErrorMessages}}
                <p>{{$message}}</p>
                {{end}}
            </span>

            <footer>
                <button class="secondary">Schlie√üen</button>
            </footer>
        </form>
    </dialog>

    <script>
        document.querySelector("#dialogErrorMessages").showModal();
    </script>
    {{end}}
</body>

</html>

{{define "basic-nav-elements"}}
<div class="flex row gap justify-end align-center">
    <a role="button" class="ghost primary" href="./feed">Feed</a>

    <a role="button" class="ghost primary icon" href="./profile">
        <i class="bi bi-person-circle"></i>
    </a>

    <a role="button" class="ghost primary icon" href="./">
        <i class="bi bi-house"></i>
    </a>
</div>
{{end}}
