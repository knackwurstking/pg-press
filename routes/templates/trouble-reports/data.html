{{$data := .}}

{{if ne (len $data.TroubleReports) 0}}
<ul id="data">
    <style>
        pre {
            text-wrap: wrap;
        }
    </style>

    {{range $tr := $data.TroubleReports}}
    <details style="margin: var(--ui-spacing) auto;" class="data">
        <summary>{{$tr.Title}}</summary>
        <pre>{{$tr.Content}}</pre>
    </details>

    <div class="actions flex row gap justify-end align-center">

        <button
            hx-get="./trouble-reports/dialog-edit?id={{$tr.ID}}"
            hx-trigger="click"
            hx-target="#dialogEdit"
            hx-swap="outerHTML"
            class="ghost primary icon"
        >
            <i class="bi bi-pen"></i>
        </button>

        {{if $data.IsAdmin}}
        <button
            hx-delete="./trouble-reports/data?id={{$tr.ID}}"
            hx-trigger="click"
            hx-target="#data"
            hx-swap="outerHTML"
            class="ghost destructive icon"
        >
            <i class="bi bi-trash"></i>
        </button>
        {{else}}
            <!-- TODO: User is not an admin, Add voting system for deleting trouble reports -->
            <!-- TODO: Store this vote somewhere and highlight it somehow -->
            <button
                id="voteForDelete"
                hx-post="./trouble-reports/vote?id={{$tr.ID}}"
                hx-trigger="click"
                hx-swap="outerHTML"
                class="ghost destructive"
                disabled
            >
                <!-- STIMME FÜR LÖSCHEN -->
                VOTE FOR DELETE
            </button>
        {{end}}

    </div>

    <hr />
    {{end}}
</ul>
{{else}}
<span id="data"></span>
{{end}}
