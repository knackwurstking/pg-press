<!-- Title -->

{{define "title"}}PG: Presse | Trouble Reports{{end}}

<!-- App Bar Title -->

{{define "app-bar-title"}}Trouble Reports{{end}}

<!-- Nav -->

{{define "nav"}} {{template "basic-nav-elements"}} {{end}}

<!-- Content -->

{{define "content"}}
<script>
    function search(event) {
        const rg = new RegExp(event.currentTarget.value, "si");
        const elements = document.querySelectorAll("details.data");

        elements.forEach((element) => {
            if (rg.test(element.textContent)) {
                console.debug("match: ", element.textContent);
                element.style.display = "block"
            } else {
                element.style.display = "none"
            }
        });
    }
</script>

<main class="container fluid">
    <section style="margin-top: 0" class="flex gap justify-between">
        <input
            style="margin: auto 0; width: 100%"
            type="search"
            name="search"
            placeholder="Suche"
            aria-label="Suche"
            onchange="search(event)"
        />
    </section>

    <section style="margin-top: 0" class="flex gap justify-end">
        <button
            hx-get="./trouble-reports/dialog-edit"
            hx-trigger="click"
            hx-target="#dialogEdit"
            hx-swap="outerHTML"
            class="flex row gap justify-between align-center"
            title="Erstelle einen neuen Eintrag"
        >
            <i class="bi bi-plus-lg"></i>
            Erstellen
        </button>
    </section>

    <details class="card warning outlined">
        <summary class="card-header flex row gap justify-start align-center">
            <i class="bi bi-code-slash"></i>
            <h4 style="width: 100%;">Developer Notes</h4>
        </summary>

        <div class="card-body flex column gap justify-center align-center">
            <ul>
                <li>
                    <strong>Modifications Modal:</strong> <br />
                    Displaying a comprehensive list with all modifications. <br />
                    Allow reverting modifications for administrators. <br />
                    Non administrators can vote for it, just like the delete button.
                </li>

                <li>
                    <strong>Attachments Handling:</strong> <br />
                    Address the attachments at a later time; there is no urgency in this matter. <br />
                </li>
            <ul>
        </div>
    </details>

    <section>
        <span
            hx-get="./trouble-reports/data"
            hx-trigger="load"
            hx-swap="outerHTML"
            id="data"></span>
    </section>

    <span id="dialogEdit"></span>
</main>
{{end}}
