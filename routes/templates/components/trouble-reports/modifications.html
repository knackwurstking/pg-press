<div id="data" class="flex column gap">
    <span>
        <button
            hx-get="./trouble-reports/data"
            hx-trigger="click"
            hx-target="#data"
            hx-swap="outerHTML"
            class="contrast flex gap"
        >
            <i class="bi bi-arrow-left"></i>Zurück
        </button>
    </span>

    <!-- TODO: Allow admins to roll back modifications, not implemented yet -->

    <div id="modifications-list" class="flex column gap">
        <h3>Änderungsverlauf</h3>

        {{$firstModified := .FirstModified}}
        {{$currentModified := .TroubleReport.Mods.Current}}

        {{range .Mods}}

        <div
            {{if eq $currentModified.Time .Time}}
            style="padding: var(--ui-spacing); border-color: var(--ui-primary)"
            {{else}}
            style="padding: var(--ui-spacing);"
            {{end}}

            class="border"
        >
            {{if eq $firstModified.Time .Time }}
            <p>Erstellt von {{.User.UserName}} am {{.GetTimeString}}</p>
            {{else}}
            <p>Geändert von {{.User.UserName}} am {{.GetTimeString}}</p>
            {{end}}

            <div class="flex column gap">
                <strong>{{.Data.Title}}</strong>
                <pre>{{.Data.Content}}</pre>
            </div>

            <!-- TODO: Add an action bar to the bottom, allow admins to roll back modifications, use "POST ./trouble-reports/modifications/{{.ID}}?time={{.Time}}" -->
        </div>

        {{end}}
    </div>
</div>
