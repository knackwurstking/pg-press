<div id="data" class="flex column gap">
    <span>
        <button
            hx-get="./trouble-reports/data"
            hx-trigger="click"
            hx-target="#data"
            hx-swap="outerHTML"
            class="contrast flex gap"
        >
            <i class="bi bi-arrow-left"></i>Zurück
        </button>
    </span>

    <div id="modifications-list" class="flex column gap">
        <h3>Änderungsverlauf</h3>

        {{$firstModified := .FirstModified}}
        {{$currentModified := .TroubleReport.Mods.Current}}

        {{range .Mods}}

        <div
            {{if eq $currentModified.Time .Time}}
            style="padding: var(--ui-spacing); border-color: var(--ui-primary)"
            {{else}}
            style="padding: var(--ui-spacing);"
            {{end}}

            class="border"
        >
            {{if eq $firstModified.Time .Time }}
            <p>Erstellt von {{.User.UserName}} am {{.GetTimeString}}</p>
            {{else}}
            <p>Geändert von {{.User.UserName}} am {{.GetTimeString}}</p>
            {{end}}

            <div class="flex column gap">
                <strong>{{.Data.Title}}</strong>
                <pre>{{.Data.Content}}</pre>
            </div>

            <div class="flex gap" style="margin-top: var(--ui-spacing); justify-content: flex-end;">
                <button
                    hx-post="./trouble-reports/modifications/{{.ID}}?time={{.Time}}"
                    hx-trigger="click"
                    hx-target="#data"
                    hx-swap="outerHTML"
                    hx-confirm="Möchten Sie wirklich zu dieser Version zurückkehren?"
                    class="secondary"
                >
                    <i class="bi bi-arrow-counterclockwise"></i>
                    Zurücksetzen
                </button>
            </div>
        </div>

        {{end}}
    </div>
</div>
