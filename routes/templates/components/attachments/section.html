<div class="attachments-label">Anhänge (max. 10MB pro Datei, max. 10 Dateien)</div>

{{if .LinkedAttachments}}
<div class="attachments-section">
	<div class="attachments-label">Vorhandene Anhänge:</div>
	<div id="existing-attachments">
		{{range .LinkedAttachments}}
		<div class="attachment-item flex row gap" data-id="{{.ID}}">
			<div class="attachment-info">
				<i class="bi bi-grip-vertical"></i>
				{{if .IsImage}}
				<i class="bi bi-image attachment-icon"></i>
				{{else if .IsDocument}}
				<i class="bi bi-file-text attachment-icon"></i>
				{{else if .IsArchive}}
				<i class="bi bi-file-zip attachment-icon"></i>
				{{else}}
				<i class="bi bi-file-earmark attachment-icon"></i>
				{{end}}
				<span class="ellipsis">{{.ID}}</span>
				<span class="text-muted">({{.GetMimeType}})</span>
			</div>
			<div class="attachment-actions">
				<button type="button" class="secondary small" onclick="viewAttachment({{$.ID}}, '{{.ID}}')">
					<i class="bi bi-eye"></i> Anzeigen
				</button>
				<button type="button" class="destructive small" onclick="deleteAttachment({{$.ID}}, '{{.ID}}')">
					<i class="bi bi-trash"></i> Löschen
				</button>
			</div>
		</div>
		{{end}}
	</div>
</div>
{{end}}

<!-- File Upload Area -->
<div class="file-input-area"
	 onclick="document.getElementById('attachments').click()"
	 ondrop="handleFileDrop(event)"
	 ondragover="handleDragOver(event)"
	 ondragleave="handleDragLeave(event)">
	<i class="bi bi-cloud-upload" style="font-size: 2em; margin-bottom: 8px;"></i>
	<div>Klicken Sie hier oder ziehen Sie Dateien hierher</div>
	<div class="text-muted">Unterstützte Formate: Bilder, PDFs, Dokumente, Archive</div>
	<input type="file"
		   name="attachments"
		   id="attachments"
		   multiple
		   accept="image/*,.pdf,.doc,.docx,.txt,.rtf,.odt,.zip,.rar,.7z,.tar,.gz,.bz2"
		   onchange="handleFileSelect(event)">
</div>

<!-- File Preview Area -->
<div id="file-preview" class="file-preview">
	<div class="attachments-label">Neue Dateien:</div>
	<div id="new-attachments"></div>
</div>
